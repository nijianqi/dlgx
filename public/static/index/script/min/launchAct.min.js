function getObjectURL(b){var a=null;return void 0!=window.createObjectURL?a=window.createObjectURL(b):void 0!=window.URL?a=window.URL.createObjectURL(b):void 0!=window.webkitURL&&(a=window.webkitURL.createObjectURL(b)),a}function setPickerStyle(g,d){var c=$(".dpicker-body").eq(d).scrollTop(),b=parseInt(c/38);if(b===g){return g}var f=$(".dpicker-body").eq(d).find(".dpicker-item");return $(f[b+1]).hasClass("empty")?b:(f=$(".dpicker-body").eq(d).find(".dpicker-item").removeClass("active").removeClass("sub-active"),$(f[b+1]).addClass("active").prev().addClass("sub-active").next().next().addClass("sub-active"),b)}function isLeapYear(a){return !isNaN(parseInt(a))&&(a%4==0&&a%100!=0||a%400==0)}function check(){$(".submit").attr("disabled","disabled");if($("#rank-head input[type=checkbox]").prop("checked")){var a=$("input[name='fund']").val().trim();if(!a){alert("资金需求不能为空！");return false}if(isNaN(a)){alert("请输入规范的数字！");return false}}return $("input[name='act_name']").val().trim()?$("input[name='act_address']").val().trim()?$("textarea[name='act_intro']").val().trim()?"未设置"===$("input[name='act_start_time']").val().trim()?(alert("开始时间不能为空！"),$(".submit").removeAttr("disabled"),!1):"未设置"!==$("input[name='act_end_time']").val().trim()||(alert("结束时间不能为空！"),$(".submit").removeAttr("disabled"),!1):(alert("活动介绍不能为空！"),$(".submit").removeAttr("disabled"),!1):(alert("活动地点不能为空！"),$(".submit").removeAttr("disabled"),!1):(alert("活动名称不能为空！"),$(".submit").removeAttr("disabled"),!1)}$(function(){var f=$(".info-mask").attr("data-status");var g=$(".info-mask").attr("data-msg");if(f==="1"||f==="-1"){$(".submit").attr("disabled","disabled");myalert(g);$(".alert-operate").click(function(){var a="actList";location.replace(a)})}$("#need").click(function(){$("#need").attr("value",1)});var d=0,c=0,b=0,e=0,h=[1,3,5,7,8,10,12];$(".dpicker-body").scrollTop("9"),$(".dpicker-body").eq(0).scroll(function(){if(d=setPickerStyle(d,0),"2"==$(".dpicker-item.active").eq(1).text()){var a=$(".dpicker-body").eq(2).find(".dpicker-item");isLeapYear($(".dpicker-item.active").eq(0).text())?a.eq(28).removeClass("none"):a.eq(28).addClass("none")}}),$(".dpicker-body").eq(1).scroll(function(){c=setPickerStyle(c,1);var a=$(".dpicker-body").eq(2).find(".dpicker-item");h.indexOf(1+c)==-1?(a.eq(30).addClass("none"),1==c&&(a.eq(29).addClass("none"),isLeapYear($(".dpicker-item.active").eq(0).text())||a.eq(28).addClass("none"))):a.removeClass("none")}),$(".dpicker-body").eq(2).scroll(function(){b=setPickerStyle(b,2)}),$(".dpicker-finish").click(function(){var i=$(".dpicker-item.active"),a=i.eq(0).text()+" 年 "+i.eq(1).text()+" 月 "+i.eq(2).text()+" 日 ";$(".date-picker").css({bottom:"-17.5rem"}),$(".show-dpicker input").eq(+e).val(a)}),$(".dpicker-cancel").click(function(){$(".date-picker").css({bottom:"-17.5rem"})}),$(".show-dpicker").click(function(){e=$(this).attr("data-id"),$(".date-picker").css({bottom:0})}),setPickerStyle(0),$("#club-logo-set").prev("input").change(function(){var k=$(this).val(),j=k.substring(k.lastIndexOf(".")+1);if(["jpg","png","gif","jpeg","bmp"].indexOf(j.toLowerCase())==-1){return myalert("请上传图片文件！"),void $(this).val("")}var a=getObjectURL(this.files[0]);a&&$("#club-logo-set").attr("src",a)});$(".mark-img-button").on("change","input[type='file']",function(){var j,l=$(this).val(),a=l.substring(l.lastIndexOf(".")+1);if(["jpg","png","gif","jpeg","bmp"].indexOf(a.toLowerCase())==-1){return myalert("请上传图片文件！"),void $(this).val("")}if($(".mark-item-img").length>=6){return myalert("最多上传6张图片"),void $(this).val("")}j=getObjectURL(this.files[0]);var k=$("<div class='mark-item-img'>");k.append("<div class='mark-item-mask'>删除</div>"),$("<img>").appendTo(k).attr("src",j),k.prependTo($(".mark-publish-img")),$(this).after($("<input type='file' name='album[]'>"))}),$(".mark-publish-img").on("click",".mark-item-img",function(){for(var a=$(this),j=0;;){if(a=a.prev(".mark-item-img"),0==a.length){break}j++}confirm("确认删除？")&&($(this).remove(),$(".mark-img-button input[type='file']").eq(j).remove())});$("#rank-head input[type=checkbox]").change(function(){if($(this).prop("checked")){$(".rank-input-wrap input").prop("disabled",false);$(".rank-input-wrap textarea").prop("disabled",false)}else{$(".rank-input-wrap input").val("").prop("disabled",true);$(".rank-input-wrap textarea").val("").prop("disabled",true)}})});